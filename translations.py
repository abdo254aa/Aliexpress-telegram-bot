TRANSLATIONS = {
    'choose_language': {
        'en': "Please choose your preferred language:",
        'ar': "ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù„ØºØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©:",
    },
    'language_set': {
        'en': "Language set to English. ğŸ‡¬ğŸ‡§",
        'ar': "ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ù„ØºØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. ğŸ‡¸ğŸ‡¦",
    },
    'welcome': {
        'en': ("ğŸ‘‹ Welcome to the AliExpress Discount Bot! ğŸ›ï¸\n\n"
               "ğŸ” <b>How to use:</b>\n"
               "1ï¸âƒ£ Copy an AliExpress product link ğŸ“‹\n"
               "2ï¸âƒ£ Send the link here ğŸ“¤\n"
               "3ï¸âƒ£ Get affiliate links back âœ¨\n\n"
               "ğŸ”— Supports regular & short links.\n"
               "ğŸš€ Send a link to start! ğŸ"),
        'ar': ("ğŸ‘‹ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø¨ÙˆØª Ø®ØµÙˆÙ…Ø§Øª AliExpress! ğŸ›ï¸\n\n"
               "ğŸ” <b>ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:</b>\n"
               "1ï¸âƒ£ Ø§Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ù…Ù†ØªØ¬ Ù…Ù† AliExpress ğŸ“‹\n"
               "2ï¸âƒ£ Ø£Ø±Ø³Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§ ğŸ“¤\n"
               "3ï¸âƒ£ Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø£ÙÙ„ÙŠÙŠØª âœ¨\n\n"
               "ğŸ”— ÙŠØ¯Ø¹Ù… Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© ÙˆØ§Ù„Ù‚ØµÙŠØ±Ø©.\n"
               "ğŸš€ Ø£Ø±Ø³Ù„ Ø±Ø§Ø¨Ø·Ù‹Ø§ Ù„Ù„Ø¨Ø¯Ø¡! ğŸ"),
    },
    'error_no_link': {
        'en': "âŒ No AliExpress links found. Please send a valid AliExpress product link.",
        'ar': "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· AliExpress. ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ù…Ù†ØªØ¬ AliExpress ØµØ§Ù„Ø­.",
    },
    'error_no_valid_links': {
        'en': "âŒ We couldn't find any valid AliExpress product links in your message.",
        'ar': "âŒ Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø±ÙˆØ§Ø¨Ø· Ù…Ù†ØªØ¬Ø§Øª AliExpress ØµØ§Ù„Ø­Ø© ÙÙŠ Ø±Ø³Ø§Ù„ØªÙƒ.",
    },
    'processing_multiple': {
        'en': "â³ Processing {count} AliExpress products. Please wait...",
        'ar': "â³ Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© {count} Ù…Ù†ØªØ¬Ø§Øª AliExpress. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...",
    },
    'prompt_send_link': {
        'en': "Please send an AliExpress product link to generate affiliate links.",
        'ar': "ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ù…Ù†ØªØ¬ AliExpress Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆØ§Ø¨Ø· Ø£ÙÙ„ÙŠÙŠØª.",
    },
    'error_processing_product': {
        'en': "An unexpected error occurred while processing product ID {product_id}. Sorry!",
        'ar': "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ {product_id}. Ø¹Ø°Ø±Ø§Ù‹!",
    },
    'error_api_or_scrape': {
        'en': "Could not retrieve data for product ID {product_id}.",
        'ar': "ØªØ¹Ø°Ø± Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ {product_id}.",
    },
    'product_details_unavailable': {
        'en': "âŒ <b>Product details unavailable</b>",
        'ar': "âŒ <b>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©</b>",
    },
    'price_label': {
        'en': "ğŸ’° <b>Price:</b>",
        'ar': "ğŸ’° <b>Ø§Ù„Ø³Ø¹Ø±:</b>",
    },
    'price_unavailable_scraped': {
        'en': "ğŸ’° <b>Price:</b> Unavailable (Scraped)",
        'ar': "ğŸ’° <b>Ø§Ù„Ø³Ø¹Ø±:</b> ØºÙŠØ± Ù…ØªÙˆÙØ± (ØªÙ… Ø§Ù„Ø³Ø­Ø¨)",
    },
    'special_offers_label': {
        'en': "ğŸ <b>Special Offers:</b>",
        'ar': "ğŸ <b>Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ©:</b>",
    },
    'get_discount': {
        'en': "Get Discount",
        'ar': "Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø®ØµÙ…",
    },
    'not_available': {
        'en': "âŒ Not Available",
        'ar': "âŒ ØºÙŠØ± Ù…ØªÙˆÙØ±",
    },
    'no_offers_found': {
        'en': "We couldn't find an offer for this product.",
        'ar': "Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ø±Ø¶ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬.",
    },
    'follow_us_label': {
        'en': "ğŸ”” <b>Follow Us:</b>",
        'ar': "ğŸ”” <b>ØªØ§Ø¨Ø¹Ù†Ø§:</b>",
    },
    'telegram_label': {
        'en': "ğŸ“± Telegram:",
        'ar': "ğŸ“± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…:",
    },
    'github_label': {
        'en': "ğŸ’» GitHub:",
        'ar': "ğŸ’» Ø¬ÙŠØª Ù‡Ø§Ø¨:",
    },
    'discord_label': {
        'en': "ğŸ¤ Discord:",
        'ar': "ğŸ¤ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯:",
    },
    'discord_cta': {
       'en': "Join Our Community",
       'ar': "Ø§Ù†Ø¶Ù… Ù„Ù…Ø¬ØªÙ…Ø¹Ù†Ø§"
    },
    'footer_text': {
        'en': "<i>By RizoZ - Deals Bot</i>",
        'ar': "<i>Ø¨ÙˆØ§Ø³Ø·Ø© RizoZ - Ø¨ÙˆØª Ø§Ù„ØµÙÙ‚Ø§Øª</i>",
    },
    'choice_day_button': { 'en': "ğŸ¯ Choice Day", 'ar': "ğŸ¯ ÙŠÙˆÙ… Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±" },
    'best_deals_button': { 'en': "ğŸ”¥ Best Deals", 'ar': "ğŸ”¥ Ø£ÙØ¶Ù„ Ø§Ù„ØµÙÙ‚Ø§Øª" },
    'github_button': { 'en': "ğŸ’» GitHub", 'ar': "ğŸ’» Ø¬ÙŠØª Ù‡Ø§Ø¨" },
    'discord_button': { 'en': "ğŸ® Discord", 'ar': "ğŸ® Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯" },
    'channel_button': { 'en': "ğŸ“± Channel", 'ar': "ğŸ“± Ø§Ù„Ù‚Ù†Ø§Ø©" },
    'support_button': { 'en': "â˜• Support Me", 'ar': "â˜• Ø§Ø¯Ø¹Ù…Ù†ÙŠ" },
    # --- Offer Names ---
    'offer_coin': {'en': "ğŸª™ Coin", 'ar': "ğŸª™ Ø¹Ù…Ù„Ø©"},
    'offer_super': {'en': "ğŸ”¥ Super Deals", 'ar': "ğŸ”¥ ØµÙÙ‚Ø§Øª Ø³ÙˆØ¨Ø±"},
    'offer_limited': {'en': "â³ Limited Offers", 'ar': "â³ Ø¹Ø±ÙˆØ¶ Ù…Ø­Ø¯ÙˆØ¯Ø©"},
    'offer_bigsave': {'en': "ğŸ’° Big Save", 'ar': "ğŸ’° ØªÙˆÙÙŠØ± ÙƒØ¨ÙŠØ±"},
    'error_displaying_product': {
        'en': "âš ï¸ Error displaying product {product_id}. Please try again or check the logs.",
        'ar': "âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬ {product_id}. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§Øª.",
    },
    'error_fallback_failed': {
         'en': "Failed to send fallback error message for product {product_id} to chat {chat_id}",
         'ar': "ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø© Ù„Ù„Ù…Ù†ØªØ¬ {product_id} Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© {chat_id}"
    }
}

# Add offer names to OFFER_PARAMS using translations
OFFER_PARAMS_LANG = {
    "coin": {"key": "offer_coin", "params": {"sourceType": "620%26channel=coin"}},
    "super": {"key": "offer_super", "params": {"sourceType": "562", "channel": "sd"}},
    "limited": {"key": "offer_limited", "params": {"sourceType": "561", "channel": "limitedoffers"}},
    "bigsave": {"key": "offer_bigsave", "params": {"sourceType": "680", "channel": "bigSave"}},
}
OFFER_ORDER = ["coin", "super", "limited", "bigsave"]


DEFAULT_LANG = 'en'

def get_text(key: str, lang_code: str | None, **kwargs) -> str:
    """Retrieves translated text for a given key and language code."""
    if lang_code is None:
        lang_code = DEFAULT_LANG
    try:
        # Attempt to get the text for the specified language
        text = TRANSLATIONS[key][lang_code]
    except KeyError:
        try:
            # Fallback to default language if the key or lang_code is missing
            text = TRANSLATIONS[key][DEFAULT_LANG]
            # Log a warning if the language was missing, but the key exists
            if lang_code != DEFAULT_LANG and key in TRANSLATIONS and lang_code not in TRANSLATIONS[key]:
                 print(f"Warning: Language '{lang_code}' not found for key '{key}'. Falling back to '{DEFAULT_LANG}'.") # Use logger in real app
            # Log an error if the key itself is missing
            elif key not in TRANSLATIONS:
                 print(f"Error: Translation key '{key}' not found.") # Use logger in real app
                 text = key # Return the key itself as a fallback
        except KeyError:
            # Fallback if the key doesn't exist even in the default language
            print(f"Error: Translation key '{key}' not found in default language '{DEFAULT_LANG}'.") # Use logger in real app
            text = key # Return the key itself

    # Format the string with any provided keyword arguments
    try:
        return text.format(**kwargs)
    except KeyError as e:
        print(f"Error: Missing formatting key {e} for text key '{key}' in language '{lang_code}'. Text: '{text}'") # Use logger in real app
        return text # Return unformatted text on error

def get_offer_name(offer_key: str, lang_code: str | None) -> str:
    """Gets the translated name for an offer."""
    if offer_key in OFFER_PARAMS_LANG:
        translation_key = OFFER_PARAMS_LANG[offer_key]['key']
        return get_text(translation_key, lang_code)
    return offer_key # Fallback to the key name

# --- END OF FILE translations.py ---# --- END OF FILE translations.py --dd
